---
layout: base.njk
permalink: /project/{{ project.slug }}/
pagination:
  alias: project
  data: projects.selected
  size: 1
renderData:
  title: "{{ project.title }}"
---
{% import 'macros.njk' as macros with context %}

<div class="project" data-router-view="project">
  <div class="scrim" data-component="scrim" data-theme="parchment"></div>
  <div class="project__progress dn s:db" data-component="projectProgress"></div>
  <div class="project__progress db s:dn" data-component="projectProgressMobile"></div>
  <div class="min-vh100 ph20 m:ph40 pt100">
    <h2 class="f20 f aic mb25">
      <span class="mr10">
        <svg class="db" width="10" viewBox="0 0 22 20" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M22 10L16.5 19.5263L5.5 19.5263L1.42652e-06 10L5.5 0.47372L16.5 0.47372L22 10Z" fill="#652D30"/>
        </svg>
      </span>
      <span>{{ project.title }}</span>
    </h2>
    <div class="mb85">
      {% for module in project.contentModules %}
        {% if module._type == 'richText' %}
          <section class="project__rich-text serif f20 lh140 mb50">
            {{ module.content | safe }}
          </section>
        {% elif module._type == 'imageWithAltTextAndCaption' %}
          <section class="project__image mb50 f14">
            {{ macros.lazyImage(
              'mb10',
              '',
              '',
              'x',
              module.image,
              module.altText,
              true
            ) }}
            {% if module.caption %}
              <p class="f16 lh131">{{ module.caption }}</p>
            {% endif %}
          </section>
        {% endif %}
      {% endfor %}
    </div>
    <div class="pb100">
      {% set nextHref = pagination.nextPageHref if pagination.next else pagination.firstPageHref %}
      {% set slug = nextHref | split('/') %}
      {% set nextProject = projects.selected | find('slug', slug[2]) %}
      <a class="tc" href="{{ nextHref }}">
        <p class="f18 lh128 mb15">Next Project</p>
        <p class="outline-text crimson serif f52 lh128">{{ nextProject.title }}</p>
      </a>
    </div>
  </div>
</div>

